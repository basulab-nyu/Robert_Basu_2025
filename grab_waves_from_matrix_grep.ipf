#pragma rtGlobals=1Macro grab_waves_from_matrix_grep()pgrab_waves_from_matrix_grep()proc pgrab_waves_from_matrix_grep(str_input,str_target)string str_inputprompt str_input "input matrix ?"string str_targetprompt str_target "target waves [grep] ?"if(strlen(str_input) == 0)	str_input = "m_check"endifsilent 1pauseupdatemake/o/n=(1,dimsize($str_input,1)) $(str_input+"_"+str_target) = nanvariable/g var_first = 1variable/g var_del = 0variable/g var_index = 0do	if(grepstring(getdimlabel($str_input,0,var_index),str_target) == 1)		if(dimsize($(str_input+"_"+str_target),0) == 1 && var_first == 1)			$(str_input+"_"+str_target)[0][] = $str_input[var_index][q]			setdimlabel 0,0,$getdimlabel($str_input,0,var_index),$(str_input+"_"+str_target)			deletepoints var_index,1,$str_input			var_index = var_index-1			var_del+=1			var_first = 0		else			redimension/n=(dimsize($(str_input+"_"+str_target),0)+1,dimsize($(str_input+"_"+str_target),1)) $(str_input+"_"+str_target)			$(str_input+"_"+str_target)[dimsize($(str_input+"_"+str_target),0)-1][] = $str_input[var_index][q]			setdimlabel 0,dimsize($(str_input+"_"+str_target),0)-1,$getdimlabel($str_input,0,var_index),$(str_input+"_"+str_target)			deletepoints var_index,1,$str_input			var_index = var_index-1			var_del+=1		endif	endif	var_index+=1while(var_index<dimsize($str_input,0)-var_del)edit $(str_input+"_"+str_target).ldmovewindow 228.75,273.5,733.5,480.5resumeupdateend