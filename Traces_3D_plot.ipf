#pragma rtGlobals=1		// Use modern global access method.#include <Waves Average>macro Traces_3D_plot()pTraces_3D_plot()proc pTraces_3D_plot(str_start,str_end,str_dwnspl,str_output)string str_startprompt str_start "start x ?"string str_endprompt str_end "end x ?"string str_dwnsplprompt str_dwnspl "downsample factor ?"string str_outputprompt str_output "output wave ?"variable/g var_start = str2num(str_start)variable/g var_end = str2num(str_end)variable/g var_dwnspl = str2num(str_dwnspl)string/g str_list = sortlist(tracenamelist("",";",1),";",16)variable/g var_numtraces = itemsinlist(str_list)variable/g var_pnts = (var_end-var_start)/(var_dwnspl*deltax($stringfromlist(0,str_list)))make/o/n=(var_pnts+1,var_numtraces) $str_output = NaNvariable/g var_index = 0string str_wavesdo	str_waves = stringfromlist(var_index,str_list)	duplicate/o/r=(var_start,var_end) $str_waves tempwave	resample/e=0/down=(var_dwnspl) tempwave	$str_output[][var_index] = tempwave[p]	setdimlabel 1,var_index,$str_waves,$str_output	var_index += 1while (var_index < var_numtraces)killwaves tempwavedisplayappendimage $str_outputmodifyimage $str_output ctab = {*,*,Rainbow,0}end