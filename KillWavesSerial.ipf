#pragma rtGlobals=1Macro Duplicate_KillWaves_Serial()pDKWS()proc pDKWS(str_input,str_dpl,str_kill,str_output)string str_inputprompt str_input "input waves ?"string str_dplprompt str_dpl "duplicate waves ? (0/1)"string str_killprompt str_kill "kill waves ? (0/1)"string str_outputprompt str_output "output waves ?"string str_list = wavelist(str_input,";","")string str_list_sort = sortlist (str_list,";",16)string str_list_print = wavelist(str_input,"\r","")string str_list_sort_print = sortlist (str_list_print,"\r",16)variable/g var_dpl = str2num(str_dpl)variable/g var_kill = str2num(str_kill)print str_list_sort_printvariable/g var_total = itemsinlist(str_list_sort)if (var_dpl==1)variable/g var_index = 0dosilent 1	string/g inWave = stringfromlist(var_index,str_list_sort)	duplicate $inWave $(nameofwave($inWave)+"_"+str_output)var_index += 1while (var_index < var_total)	endifif (var_kill==1)variable/g var_index = 0dosilent 1	string/g inWave = stringfromlist(var_index,str_list_sort)	killwaves/z $inWavevar_index += 1while (var_index < var_total)	endifend