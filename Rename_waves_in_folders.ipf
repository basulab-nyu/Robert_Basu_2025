#pragma rtGlobals=1Macro Rename_waves_in_folders()pRwif()proc pRwif(str_input,str_output)string str_inputprompt str_input "input folders ?"string str_outputprompt str_output "output waves ?"variable/g var_Fcount = countobjects("",4)string/g str_Flistif(itemsinlist(str_Flist)!=0)	killstrings str_Flistendifstring/g str_Flistvariable/g var_Fscroll = 0silent 1pauseupdatedo	str_Flist = addlistitem(getindexedobjname("", 4, var_Fscroll),str_Flist,";",var_Fscroll)	var_Fscroll+=1while(var_Fscroll<var_Fcount)string/g str_Ftarget = listmatch(str_Flist,str_input)variable/g var_Findex = 0do	string/g str_Fbrowse = stringfromlist(var_Findex,str_Ftarget)	print str_Fbrowse	string/g str_name = str_output	movestring str_name, root:$(str_Fbrowse):	setdatafolder(str_Fbrowse)	string/g str_Wlist = wavelist("*",";","")	variable/g var_Windex = 0	do		rename $stringfromlist(var_Windex,str_Wlist),$(nameofwave($stringfromlist(var_Windex,str_Wlist))+"_"+str_name)		var_Windex+=1	while(var_Windex<itemsinlist(str_Wlist))	killstrings str_name	setdatafolder root:	var_Findex+=1while(var_Findex<itemsinlist(str_Ftarget))resumeupdateend