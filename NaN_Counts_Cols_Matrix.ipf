#pragma rtGlobals=1		// Use modern global access method#include <Waves Average>macro NaN_Counts_Cols_Matrix()pNaN_Counts_Cols_Matrix()proc pNaN_Counts_Cols_Matrix(str_input)string str_inputprompt str_input "input waves ?"string str_list = sortlist (wavelist(str_input,";",""),";",16)print replacestring(";",str_list,"\r")variable var_indexvariable var_index1var_index = 0dosilent 1	var_index1 = 0	make/o/n=(dimsize($stringfromlist(var_index,str_list),1)) $(stringfromlist(var_index,str_list)+"_NaNcounts") = nan	make/o/n=(dimsize($stringfromlist(var_index,str_list),1)) $(stringfromlist(var_index,str_list)+"_nonNaNcounts") = nan	make/o/n=(dimsize($stringfromlist(var_index,str_list),1)) $(stringfromlist(var_index,str_list)+"_nonNaNratio") = nan	copydimlabels/cols=0 $stringfromlist(var_index,str_list),$(stringfromlist(var_index,str_list)+"_NaNcounts")	copydimlabels/cols=0 $stringfromlist(var_index,str_list),$(stringfromlist(var_index,str_list)+"_nonNaNcounts")	copydimlabels/cols=0 $stringfromlist(var_index,str_list),$(stringfromlist(var_index,str_list)+"_nonNaNratio")	do		duplicate/o/r=[][var_index1] $stringfromlist(var_index,str_list) tempwave		wavestats/q tempwave		$(stringfromlist(var_index,str_list)+"_NaNcounts")[var_index1] = v_numnans		$(stringfromlist(var_index,str_list)+"_nonNaNcounts")[var_index1] = v_npnts		$(stringfromlist(var_index,str_list)+"_nonNaNratio")[var_index1] = (v_npnts)/numpnts(tempwave)		killwaves/z tempwave		var_index1+=1	while(var_index1<dimsize($stringfromlist(var_index,str_list),1))	var_index+=1while (var_index<itemsinlist(str_list))end