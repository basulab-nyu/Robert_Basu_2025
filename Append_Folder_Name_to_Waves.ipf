#pragma rtGlobals=1Macro Append_Folder_Name_to_Waves()pAppend_Folder_Name_to_Waves()proc pAppend_Folder_Name_to_Waves(str_input)string str_inputprompt str_input "input folders ?"variable/g var_Fcount = countobjects("",4)killstrings/z str_Fliststring/g str_Flistvariable/g var_Fscroll = 0silent 1pauseupdatedo	str_Flist = addlistitem(getindexedobjname("", 4, var_Fscroll),str_Flist,";",var_Fscroll)	var_Fscroll+=1while(var_Fscroll<var_Fcount)string/g str_Ftarget = listmatch(str_Flist,str_input)variable/g var_Findex = 0do	string/g str_Fbrowse = stringfromlist(var_Findex,str_Ftarget)	print str_Fbrowse	string/g str_name = str_Fbrowse	movestring str_name, root:$(str_Fbrowse):	setdatafolder(str_Fbrowse)	string/g str_Wlist = wavelist("*",";","")	if(strlen(str_Wlist)>0)		variable/g var_Windex = 0		do			rename $stringfromlist(var_Windex,str_Wlist),$(nameofwave($stringfromlist(var_Windex,str_Wlist))+"_"+str_name)			var_Windex+=1		while(var_Windex<itemsinlist(str_Wlist))	endif	killstrings/z str_name	setdatafolder root:	var_Findex+=1while(var_Findex<itemsinlist(str_Ftarget))resumeupdateend