#pragma rtGlobals=1macro average_matrices()paverage_matrices()proc paverage_matrices(str_input1,str_input2)string str_input1prompt str_input1 "input waves #1 ?"string str_input2prompt str_input2 "input waves #2 ?"string str_list1 = sortlist(wavelist(str_input1,";",""),";",16)string str_list2 = sortlist(wavelist(str_input2,";",""),";",16)print replacestring(";",str_list1,"\r")print replacestring(";",str_list2,"\r")variable var_indexvariable var_index1if(itemsinlist(str_list1) == itemsinlist(str_list2))	var_index = 0	do		print stringfromlist(var_index,str_list1)		print stringfromlist(var_index,str_list2)		duplicate/o $stringfromlist(var_index,str_list1) $(stringfromlist(var_index,str_list1)+"_avg")		$(stringfromlist(var_index,str_list1)+"_avg") = nan		var_index1 = 0		do			duplicate/o/r=[][var_index1] $stringfromlist(var_index,str_list1) tempcol1			duplicate/o/r=[][var_index1] $stringfromlist(var_index,str_list2) tempcol2			fwaveaverage("tempcol1;tempcol2","",0,0,"tempcol_avg","")			$(stringfromlist(var_index,str_list1)+"_avg")[][var_index1] = tempcol_avg[p]			killwaves/z tempcol1,tempcol2,tempcol_avg			var_index1+=1		while(var_index1<dimsize($stringfromlist(var_index,str_list1),1))		var_index+=1	while(var_index<itemsinlist(str_list1))else	print "input waves mismatch!"endifend