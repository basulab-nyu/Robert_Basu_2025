#pragma rtGlobals=1macro extract_matrix_cols_from_label()pextract_matrix_cols_from_label()proc pextract_matrix_cols_from_label(str_input,str_lbl)string str_inputprompt str_input "input waves ?"string str_lblprompt str_lbl "label ?"string str_liststring str_name = str_lbldo	if(strlen(str_name[strsearch(str_name,"*",0)+1,inf])>0)		str_name = str_name[strsearch(str_name,"*",0)+1,inf]	else		str_name = str_name[0,strsearch(str_name,"*",0)-1]	endifwhile(strsearch(str_name,"*",0)!=-1)variable var_xvariable var_yvariable var_addvariable var_indexvariable var_index1str_list = sortlist(wavelist(str_input,";",""),";",16)print replacestring(";",str_list,"\r")var_index = 0do	var_x = 0	var_y = 0	var_index1 = 0	do		if(stringmatch(getdimlabel($stringfromlist(var_index,str_list),1,var_index1),str_lbl) == 1)			duplicate/o/r=[][var_index1] $stringfromlist(var_index,str_list) temp			redimension/n=-1 temp			var_x = max(var_x,numpnts(temp))			var_y+=1			killwaves/z temp		endif		var_index1+=1	while(var_index1<dimsize($stringfromlist(var_index,str_list),1))	if(var_x>0 && var_y>0)		print "match in "+stringfromlist(var_index,str_list)		make/o/n=(var_x,var_y) $(str_name+"_"+stringfromlist(var_index,str_list)) = nan		var_add = 0		var_index1 = 0		do			if(stringmatch(getdimlabel($stringfromlist(var_index,str_list),1,var_index1),str_lbl) == 1)				$(str_name+"_"+stringfromlist(var_index,str_list))[][var_add] = $stringfromlist(var_index,str_list)[p][var_index1]				setdimlabel 1,var_add,$getdimlabel($stringfromlist(var_index,str_list),1,var_index1),$(str_name+"_"+stringfromlist(var_index,str_list))				var_add+=1			endif			var_index1+=1		while(var_index1<dimsize($stringfromlist(var_index,str_list),1))		setscale/p x,dimoffset($stringfromlist(var_index,str_list),0),dimdelta($stringfromlist(var_index,str_list),0),$(str_name+"_"+stringfromlist(var_index,str_list))	else		print "no match in "+stringfromlist(var_index,str_list)	endif	var_index+=1while(var_index<itemsinlist(str_list))end