#pragma rtGlobals=1		// Use modern global access method.#include <Waves Average>macro grab_Y_from_X_scalar_refwave()pgrab_Y_from_X_scalar_refwave()proc pgrab_Y_from_X_scalar_refwave(str_input,str_ref,str_scalar,str_output)string str_inputprompt str_input "input waves (Y) ?"string str_refprompt str_ref "reference wave (X) ?"string str_scalarprompt str_scalar "scalar ?"string str_outputprompt str_output "output wave ?"string/g str_list = sortlist (wavelist(str_input,";",""),";",16)print "input Y waves:"print sortlist (wavelist(str_input,"\r",""),"\r",16)print "reference X wave:"print nameofwave($str_ref)variable/g var_scalar = str2num(str_scalar)make/o/n=(itemsinlist(str_list)) $str_output = nansilent 1pauseupdatevariable/g var_index = 0if(numpnts($str_ref)!=itemsinlist(str_list))	var_index = itemsinlist(str_list)	print "input vs ref mismatch - abort"endifdo	$str_output[var_index] = $stringfromlist(var_index,str_list)(var_scalar*$str_ref[var_index])	setdimlabel 0,var_index,$nameofwave($stringfromlist(var_index,str_list)),$str_output	var_index += 1while (var_index < itemsinlist(str_list))resumeupdateend