#pragma rtGlobals=1		// Use modern global access method.#include <Waves Average>macro Matrix_2Dxy_to_3Dxzy_combine()pMatrix_2Dto3D_combine()proc pMatrix_2Dto3D_combine(str_input,str_output)string str_inputprompt str_input "input waves ?"string str_outputprompt str_output "output waves ?"string str_list = sortlist(wavelist(str_input,";",""),";",16)print replacestring(";",str_list,"\r")variable var_indexsilent 1pauseupdatemake/o/n=(dimsize($stringfromlist(0,str_list),0),dimsize($stringfromlist(0,str_list),1),itemsinlist(str_list)) temp3Dvar_index = 0do	temp3D[][][var_index] = $stringfromlist(var_index,str_list)[p][q]	setdimlabel 2,var_index,$stringfromlist(var_index,str_list),temp3D	copydimlabels/rows=0/cols=1 $stringfromlist(var_index,str_list),temp3D	var_index+=1while(var_index<itemsinlist(str_list))matrixop/o temp3Dt = transposevol(temp3D,1)duplicate/o temp3Dt $str_outputcopydimlabels/rows=0/cols=2/layr=1 temp3D,$str_outputkillwaves/z temp3D,temp3Dtresumeupdateend