#pragma rtGlobals=1Macro display_waves_groups()pdisplay_waves_groups()proc pdisplay_waves_groups_alt(str_input)string str_inputprompt str_input "reference wave (text) ?"if(strlen(str_input) == 0)	str_input = "wref"endifvariable var_indexvariable var_index1variable var_index2pauseupdatevar_index = 0do	string $("str_list_"+num2str(var_index)) = sortlist(wavelist(wref[var_index],";",""),";",16)	print replacestring(";",$("str_list_"+num2str(var_index)),"\r")	var_index+=1while(var_index<numpnts(wref))var_index = 0do	display	movewindow 400,45,750,350	var_index1 = 0	do		var_index2 = 0		do			if(stringmatch(wref[var_index1],"*control*") == 1)			appendtograph/l=control $stringfromlist(var_index,$("str_list_"+num2str(var_index1)))[][var_index2]				if(var_index2 == 0)					modifygraph rgb($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = (0,0,0,6554)					modifygraph mode($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = 1					modifygraph lsize($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = 5				else					modifygraph rgb($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = (0,0,0,6554)					modifygraph mode($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = 1					modifygraph lsize($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = 5				endif			endif			if(stringmatch(wref[var_index1],"*LECglu*") == 1)			appendtograph/l=LECglu $stringfromlist(var_index,$("str_list_"+num2str(var_index1)))[][var_index2]				if(var_index2 == 0)					modifygraph rgb($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = (2,39321,1,6554)					modifygraph mode($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = 1					modifygraph lsize($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = 5				else					modifygraph rgb($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = (2,39321,1,6554)					modifygraph mode($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = 1					modifygraph lsize($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = 5				endif			endif			if(stringmatch(wref[var_index1],"*LECgaba*") == 1)			appendtograph/l=LECgaba $stringfromlist(var_index,$("str_list_"+num2str(var_index1)))[][var_index2]				if(var_index2 == 0)					modifygraph rgb($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = (65535,0,0,6554)					modifygraph mode($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = 1					modifygraph lsize($stringfromlist(var_index,$("str_list_"+num2str(var_index1)))) = 5				else					modifygraph rgb($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = (65535,0,0,6554)					modifygraph mode($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = 1					modifygraph lsize($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"#"+num2str(var_index2))) = 5				endif			endif			var_index2+=1		while(var_index2<dimsize($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),1))		make/o/n=(dimsize($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),0)) $(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")		make/o/n=(dimsize($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),0)) $(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_sem")		setscale/p x,dimoffset($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),0),dimdelta($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),0),$(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")		setscale/p x,dimoffset($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),0),dimdelta($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),0),$(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_sem")		var_index2 = 0		do			duplicate/o/r=[var_index2][] $stringfromlist(var_index,$("str_list_"+num2str(var_index1))) tempwave			matrixtranspose tempwave			redimension/n=-1 tempwave			wavestats/q tempwave			$(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")[var_index2] = v_avg			$(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_sem")[var_index2] = v_sem			var_index2+=1		while(var_index2<dimsize($stringfromlist(var_index,$("str_list_"+num2str(var_index1))),0))		if(stringmatch(wref[var_index1],"*control*") == 1)			appendtograph/l=control $(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")			modifygraph rgb($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")) = (0,0,0)		endif		if(stringmatch(wref[var_index1],"*LECglu*") == 1)			appendtograph/l=LECglu $(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")			modifygraph rgb($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")) = (2,39321,1)		endif		if(stringmatch(wref[var_index1],"*LECgaba*") == 1)			appendtograph/l=LECgaba $(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")			modifygraph rgb($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")) = (65535,0,0)		endif		errorbars $(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg") SHADE= {0,4,(0,0,0,0),(0,0,0,0)},wave=($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_sem"),$(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_sem"))		modifygraph mode($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")) = 0		modifygraph lsize($(stringfromlist(var_index,$("str_list_"+num2str(var_index1)))+"_avg")) = 2		var_index1+=1	while(var_index1<numpnts(wref))	//modifygraph offset={1,0},gfrelsize=4	//resumeupdate	//getaxis/q bottom	//setaxis bottom v_min-0.1,v_max+0.1	//pauseupdate	modifygraph gfrelsize=4	setaxis bottom 0,200	modifygraph freepos(control)=0	modifygraph freepos(LECglu)=0	modifygraph freepos(LECgaba)=0	setaxis control 0,*	setaxis LECglu 0,*	setaxis LECgaba 0,*	modifygraph axisenab(control)={0.7,1}	modifygraph axisenab(LECglu)={0.35,0.65}	modifygraph axisenab(LECgaba)={0,0.3}	label bottom "position (cm)"	label LECglu stringfromlist(var_index,$("str_list_0"))	modifygraph lblpos(LECglu)=60	modifygraph nticks(control)=3	modifygraph nticks(LECglu)=3	modifygraph nticks(LECgaba)=3	var_index+=1while(var_index<itemsinlist($("str_list_0")))resumeupdatekillwaves/z tempwaveend