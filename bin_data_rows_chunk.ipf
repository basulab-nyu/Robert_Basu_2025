#pragma rtGlobals=1macro bin_data_rows_chunk()pbin_data_rows_chunk()proc pbin_data_rows_chunk(str_input,str_target,str_output)string str_inputprompt str_input "input waves ?"string str_targetprompt str_target "chunk size ?"string str_outputprompt str_output "output waves ?"if(strlen(str_input) == 0)	str_input = "*"+igorinfo(1)+"*"endifif(strlen(str_target) == 0)	str_target = "3"endifif(strlen(str_output) == 0)	str_output = "bin"endifstring str_list = sortlist(wavelist(str_input,";",""),";",16)str_list = removefromlist(greplist(str_list,"(bin)"),str_list)str_list = removefromlist(greplist(str_list,"(EPSC)"),str_list)str_list = removefromlist(greplist(str_list,"(RaRmCm)"),str_list)print replacestring(";",str_list,"\r")variable var_target = str2num(str_target)variable var_offsetvariable var_deltavariable var_alignvariable var_floorvariable var_ceilvariable var_addpntsvariable var_ini_pntsvariable var_lengthvariable var_scrollvariable var_startvariable var_endvariable var_indexvariable var_index2pauseupdatevar_index = 0do		if(wavetype($stringfromlist(var_index,str_list),1) == 1)		duplicate/o $stringfromlist(var_index,str_list) tempwave		var_offset = dimoffset(tempwave,0)		var_delta = dimdelta(tempwave,0)		var_align = 0-(var_offset/var_delta)		var_floor = floor(var_align/var_target)		var_ceil = ceil(var_align/var_target)		if(var_floor != var_ceil)			var_addpnts = var_ceil*var_target-var_align			var_index2 = 0			do				insertpoints/m=0/v=NaN 0,1,tempwave				setscale/p x, var_offset-var_delta,var_delta,tempwave				var_index2+=1			while(var_index2<var_addpnts)//			insertpoints/m=0/v=NaN 0,var_addpnts,tempwave//			setscale/p x, var_offset-var_addpnts*var_delta,var_delta,tempwave		endif		var_ini_pnts = dimsize(tempwave,0)		var_floor = floor(var_ini_pnts/var_target)		var_ceil= ceil(var_ini_pnts/var_target)		if(var_floor != var_ceil)			var_addpnts = var_ceil*var_target-var_ini_pnts			insertpoints/m=0/v=NaN var_ini_pnts,var_addpnts,tempwave		endif		var_length = dimsize(tempwave,0)/var_target		make/o/n=(var_length,dimsize(tempwave,1)) $(stringfromlist(var_index,str_list)+"_"+str_output) = nan		var_scroll = 0		do			var_start = var_scroll*var_target			var_end = (var_scroll+1)*var_target -1			var_index2 = 0			do				duplicate/o/r=[var_start,var_end][var_index2] tempwave,tempwave2				wavestats/q tempwave2				$(stringfromlist(var_index,str_list)+"_"+str_output)[var_scroll][var_index2] = v_avg				killwaves/z tempwave2				var_index2+=1			while(var_index2<dimsize(tempwave,1))			var_scroll+=1		while(var_scroll<var_length)		var_offset = dimoffset(tempwave,0)		var_delta = dimdelta(tempwave,0)*var_target		setscale/p x var_offset,var_delta,"",$(stringfromlist(var_index,str_list)+"_"+str_output)		killwaves/z tempwave	endif	copydimlabels/cols=1 $stringfromlist(var_index,str_list),$(stringfromlist(var_index,str_list)+"_"+str_output)	var_index+=1while(var_index<itemsinlist(str_list))resumeupdateend