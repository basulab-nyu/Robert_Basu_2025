#pragma rtGlobals=1#include <Waves Average>macro histo_cumulative_from_1D_waves()phisto_cumulative_from_2D_waves()proc phisto_cumulative_from_2D_waves(str_input,str_binstart,str_binwidth,str_binnum,str_whiskers)string str_inputprompt str_input "input waves ?"string str_binstartprompt str_binstart "bin start ?"string str_binwidthprompt str_binwidth "bin width ?"string str_binnumprompt str_binnum "bin number ?"string str_whiskersprompt str_whiskers "whisker (0 = data, 1 = SD, 2 = 10th percentile) ?"if(strlen(str_binstart) == 0)	str_binstart = "-0.1"endifif(strlen(str_binwidth) == 0)	str_binwidth = "0.1"endifif(strlen(str_binnum) == 0)	str_binnum = "101"endifif(strlen(str_whiskers) == 0)	str_whiskers = "0"endifstring str_list = sortlist(wavelist(str_input,";",""),";",16)str_list = removefromlist(str_input+"_h",str_list)str_list = removefromlist(str_input+"_pdf",str_list)str_list = removefromlist(str_input+"_data",str_list)print replacestring(";",str_list,"\r")string str_graph_list = sortlist(winlist("*",";","WIN:1"),";",16)variable var_left_gvariable var_top_gvariable var_right_gvariable var_bottom_gvariable var_graph_laststring str_graph_lastif(itemsinlist(str_graph_list) == 0)	var_left_g = 403.5	var_top_g = 38	var_right_g = 753.75	var_bottom_g = 343.25else	var_graph_last = itemsinlist(str_graph_list)-1	str_graph_last = winname(0,1)	getwindow $str_graph_last, wsize	var_left_g = v_left + 5.25	var_top_g = v_top + 22.5	var_right_g = v_right + 5.25	var_bottom_g = v_bottom + 22.5endifvariable var_index0variable var_indexvariable var_whiskersif(str2num(str_whiskers) == 0)	var_whiskers = 0endifif(str2num(str_whiskers) == 1)	var_whiskers = 3endifif(str2num(str_whiskers) == 2)	var_whiskers = 4endifvar_index0 = 0silent 1pauseupdatedo//	display/n=$("g_"+replacestring("*",str_input,""))//	display/host=$("g_"+replacestring("*",str_input,""))/n=$("sg_"+replacestring("*",str_input,""))/w=(0.2,0.2,0.9,0.9)	var_left_g = var_left_g + var_index0*5.25	var_top_g = var_top_g + var_index0*22.5	var_right_g = var_right_g + var_index0*5.25	var_bottom_g = var_bottom_g + var_index0*22.5//	movewindow var_left_g,var_top_g,var_right_g,var_bottom_g	killwaves/z $(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_h")	killwaves/z $(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_pdf")	killwaves/z $(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_data")	killwaves/z $(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_h")	killwaves/z $(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf")	killwaves/z $(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_data")	var_index = 0	do		if(strlen(getdimlabel($stringfromlist(var_index0,str_list),1,var_index)) == 0)			histogram/b={str2num(str_binstart),str2num(str_binwidth),str2num(str_binnum)}/c/p/rmd=[][var_index,var_index]/dest=$(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_h") $stringfromlist(var_index0,str_list)//			appendtograph/r/w=$("g_"+replacestring("*",str_input,"")) $(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_h")//			modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_h"))=(0,0,0,32768)			histogram/b={str2num(str_binstart),str2num(str_binwidth),str2num(str_binnum)}/c/cum/p/rmd=[][var_index,var_index]/dest=$(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_pdf") $stringfromlist(var_index0,str_list)//			appendtograph/w=$("g_"+replacestring("*",str_input,"")) $(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_pdf")			duplicate/o/r=[][var_index,var_index] $stringfromlist(var_index0,str_list) $(stringfromlist(var_index0,str_list)+"_"+num2str(var_index)+"_data")		else			histogram/b={str2num(str_binstart),str2num(str_binwidth),str2num(str_binnum)}/c/p/rmd=[][var_index,var_index]/dest=$(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_h") $stringfromlist(var_index0,str_list)//			appendtograph/r/w=$("g_"+replacestring("*",str_input,"")) $(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_h")					//			modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_h"))=(0,0,0,32768)			histogram/b={str2num(str_binstart),str2num(str_binwidth),str2num(str_binnum)}/c/cum/p/rmd=[][var_index,var_index]/dest=$(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf") $stringfromlist(var_index0,str_list)//			appendtograph/w=$("g_"+replacestring("*",str_input,"")) $(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf")			duplicate/o/r=[][var_index,var_index] $stringfromlist(var_index0,str_list) $(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_data")			if(stringmatch(getdimlabel($stringfromlist(var_index0,str_list),1,var_index),"*_SAL_*") == 1)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_h"))=(0,0,0,32768)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf"))=(0,0,0)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf"))=(0,0,0)			endif			if(stringmatch(getdimlabel($stringfromlist(var_index0,str_list),1,var_index),"*_PSEM_*") == 1)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_h"))=(2,39321,1,32768)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf"))=(2,39321,1)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf"))=(2,39321,1)			endif			if(stringmatch(getdimlabel($stringfromlist(var_index0,str_list),1,var_index),"*_PSEMCNO_*") == 1)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_h"))=(65535,0,0,32768)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf"))=(65535,0,0)//				modifygraph/w=$("g_"+replacestring("*",str_input,"")) rgb($(stringfromlist(var_index0,str_list)+"_"+getdimlabel($stringfromlist(var_index0,str_list),1,var_index)+"_pdf"))=(65535,0,0)			endif		endif		var_index+=1	while(var_index<dimsize($stringfromlist(var_index0,str_list),1))	var_index0+=1while(var_index0<itemsinlist(str_list))resumeupdateend