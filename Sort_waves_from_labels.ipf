#pragma rtGlobals=1Macro Sort_waves_from_labels()pSort_waves_from_labels()proc pSort_waves_from_labels(str_input,str_dim,str_trans)string str_inputprompt str_input "input waves ?"string str_dimprompt str_dim "label dimension [default = 0] ?"string str_transprompt str_trans "transpose sorted waves (0 = no / 1 = yes [default]) ?"if(strlen(str_dim) == 0)	variable/g var_dim = 0else	variable/g var_dim = str2num(str_dim)endifif(strlen(str_trans) == 0)	variable/g var_trans = 1else	variable/g var_trans = str2num(str_trans)endifstring/g str_list = sortlist(wavelist(str_input,";",""),";",16)print replacestring(";",str_list,"\r")silent 1pauseupdateif(strlen(str_list)>0)	variable/g var_index = 0	do		make/o/t/n=(dimsize($stringfromlist(var_index,str_list),var_dim)) $("list_"+stringfromlist(var_index,str_list))		if (exists("str_labels") == 2)			killstrings/z str_labels		endif		string/g str_labels		variable/g var_labels = 0		do			if(grepstring(getdimlabel($stringfromlist(var_index,str_list),var_dim,var_labels),"((?i)[0-9]{6}+[c]{1}+[0-9]{1,2})") == 1)				if (exists("str_grep") == 2)					killstrings/z str_grep				endif				string/g str_grep				splitstring/e=("((?i)[0-9]{6}+[c]{1}+[0-9]{1,2})") getdimlabel($stringfromlist(var_index,str_list),var_dim,var_labels),str_grep				if(strlen(str_labels) == 0)					str_labels = str_grep				else					str_labels = str_labels+";"+str_grep				endif			endif			var_labels+=1		while(var_labels<dimsize($stringfromlist(var_index,str_list),var_dim))		$("list_"+stringfromlist(var_index,str_list)) = stringfromlist(p,str_labels,";")		duplicate/o $stringfromlist(var_index,str_list) $(stringfromlist(var_index,str_list)+"_sorted")		duplicate/o $("list_"+stringfromlist(var_index,str_list)) $("list_"+stringfromlist(var_index,str_list)+"_sorted")		if(var_dim == 0)			sort/a/diml $("list_"+stringfromlist(var_index,str_list)+"_sorted"),$("list_"+stringfromlist(var_index,str_list)+"_sorted"),$(stringfromlist(var_index,str_list)+"_sorted")		else			matrixtranspose $(stringfromlist(var_index,str_list)+"_sorted")			sortcolumns/a/diml keywaves={$("list_"+stringfromlist(var_index,str_list)+"_sorted")},sortwaves={$(stringfromlist(var_index,str_list)+"_sorted")}			sort/a/diml $("list_"+stringfromlist(var_index,str_list)+"_sorted"),$("list_"+stringfromlist(var_index,str_list)+"_sorted")			if(var_trans == 0)				matrixtranspose $(stringfromlist(var_index,str_list)+"_sorted")			endif		endif		var_index+=1	while(var_index<itemsinlist(str_list))endifresumeupdateend