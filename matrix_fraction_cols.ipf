#pragma rtGlobals=1Macro matrix_fraction_cols()pmatrix_fraction_cols()proc pmatrix_fraction_cols(str_input,str_output)string str_inputprompt str_input "input waves ?"string str_outputprompt str_output "output waves ?"string str_list = sortlist(wavelist(str_input,";",""),";",16)print replacestring(";",str_list,"\r")variable var_indexvariable var_index1var_index = 0do	duplicate/o $stringfromlist(var_index,str_list) $(stringfromlist(var_index,str_list)+"_"+str_output)	$(stringfromlist(var_index,str_list)+"_"+str_output) = nan	var_index1 = 0	do		duplicate/o/r=[][var_index1] $stringfromlist(var_index,str_list) tempwave		redimension/n=-1 tempwave		wavestats/q tempwave		tempwave = tempwave/v_sum		$(stringfromlist(var_index,str_list)+"_"+str_output)[][var_index1] = tempwave[p]		var_index1+=1	while(var_index1<dimsize($stringfromlist(var_index,str_list),1))	var_index+=1while(var_index<itemsinlist(str_list))killwaves/z tempwaveend