#pragma rtGlobals=1Macro Get_Waves_in_Folders_from_textref()pGet_Waves_in_Folders_from_textref()proc pGet_Waves_in_Folders_from_textref(str_input)string str_inputprompt str_input "reference textwave ?"variable/g var_Fcount = countobjects("",4)string/g str_Flistif(itemsinlist(str_Flist)!=0)	killstrings str_Flistendifstring/g str_Flistsilent 1pauseupdatevariable/g var_Fscroll = 0do	str_Flist = addlistitem(getindexedobjname("", 4, var_Fscroll),str_Flist,";",var_Fscroll)	var_Fscroll+=1while(var_Fscroll<countobjects("",4))print replacestring(";",str_Flist,"\r")variable/g var_Fscroll = 0do	string/g str_Fbrowse = stringfromlist(var_Fscroll,str_Flist)	movewave $str_input, root:$(str_Fbrowse):$str_input	setdatafolder(str_Fbrowse)	variable/g var_index = 0	do		string/g str_grab = $str_input[var_index]		str_grab = "*"+str_grab+"*"		string/g str_wavelist = wavelist(str_grab,";","")		variable/g var_Wscroll = 0		do			if(strlen(str_wavelist)==0)				break			endif			string/g str_wave = stringfromlist(var_Wscroll,str_wavelist)			duplicate $str_wave, $(nameofwave($str_wave)+"_move")			movewave $(nameofwave($str_wave)+"_move"), root:$str_wave			var_Wscroll+=1		while(var_Wscroll<itemsinlist(str_wavelist))		var_index+=1	while(var_index<numpnts($str_input))	movewave $str_input, root:$str_input	setdatafolder root:	var_Fscroll+=1while(var_Fscroll<countobjects("",4))resumeupdateend