#pragma rtGlobals=1Macro Concatenate_Matrices_from_textref()pConcatenate_Matrices_from_textref()proc pConcatenate_Matrices_from_textref(str_input,str_output)string str_inputprompt str_input "input waves (textref) ?"string str_outputprompt str_output "output waves ?"string str_liststring str_namevariable var_indexvariable var_index2variable var_index3var_index = 0do	str_list = ""	str_list = sortlist(wavelist($str_input[var_index],";",""),";",16)	print replacestring(";",str_list,"\r")	str_name = ""	str_name = replacestring("*",$str_input[var_index],"")	str_name = replacestring("__",str_name,"_")	str_name = str_name+"_"+str_output	make/o/n=(dimsize($stringfromlist(0,str_list),0)*itemsinlist(str_list),dimsize($stringfromlist(0,str_list),1)) $str_name = nan	copydimlabels/cols=1 $stringfromlist(0,str_list),$str_name	var_index2 = 0	do		var_index3 = 0		do			$str_name[var_index3+dimsize($stringfromlist(0,str_list),0)*var_index2][] = $stringfromlist(var_index2,str_list)[var_index3][q]			setdimlabel 0,var_index3+dimsize($stringfromlist(0,str_list),0)*var_index2,$getdimlabel($stringfromlist(var_index2,str_list),0,var_index3),$str_name			var_index3+=1		while(var_index3<dimsize($stringfromlist(0,str_list),0))		var_index2+=1	while(var_index2<itemsinlist(str_list))	var_index+=1while(var_index<numpnts($str_input))end