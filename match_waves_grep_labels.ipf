#pragma rtGlobals=1macro match_waves_grep_labels()pmatch_waves_grep_labels()proc pmatch_waves_grep_labels(str_input,str_ref,str_output)string str_inputprompt str_input "input waves ?"string str_refprompt str_ref "reference wave ?"string str_outputprompt str_output "output waves ?"string str_liststring str_matchstring str_labelvariable var_indexvariable var_index2variable var_index3str_list = sortlist(wavelist(str_input,";",""),";",16)print replacestring(";",str_list,"\r")silent 1pauseupdatevar_index = 0do	make/o/n=(0) $(stringfromlist(var_index,str_list)+"_"+str_output)	var_index2 = 0	do		var_index3 = 0		do			str_match = ""			str_label = ""			splitstring/e="([0-9]{6}+[c]{1}+[0-9]+)" getdimlabel($str_ref,0,var_index2),str_match			splitstring/e="([0-9]{6}+[c]{1}+[0-9]+)" getdimlabel($stringfromlist(var_index,str_list),0,var_index3),str_label			if(stringmatch(str_label,str_match) == 1)				redimension/n=(dimsize($(stringfromlist(var_index,str_list)+"_"+str_output),0)+1) $(stringfromlist(var_index,str_list)+"_"+str_output)				$(stringfromlist(var_index,str_list)+"_"+str_output)[dimsize($(stringfromlist(var_index,str_list)+"_"+str_output),0)-1] = nan				$(stringfromlist(var_index,str_list)+"_"+str_output)[dimsize($(stringfromlist(var_index,str_list)+"_"+str_output),0)-1] = $stringfromlist(var_index,str_list)[var_index3]				setdimlabel 0,dimsize($(stringfromlist(var_index,str_list)+"_"+str_output),0)-1,$str_match,$(stringfromlist(var_index,str_list)+"_"+str_output)			endif			var_index3+=1		while(var_index3<dimsize($stringfromlist(var_index,str_list),0))		var_index2+=1	while(var_index2<dimsize($str_ref,0))	var_index+=1while(var_index<itemsinlist(str_list))resumeupdateend