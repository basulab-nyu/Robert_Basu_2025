#pragma rtglobals=1#include <Waves Average>macro display_from_ref()pdisplay_from_ref()proc pdisplay_from_ref(str_input,str_xticks,str_xlabels)string str_inputprompt str_input "ref?"string str_xticksprompt str_xticks "x?"string str_xlabelsprompt str_xlabels "labels?"if(strlen(str_input) == 0)	str_input = "w_ref"endifif(strlen(str_xticks) == 0)	str_xticks = "w_xticks"	make/o/n=19 $("w_xticks") = {1,2,3,4,5,6,7,8,9,10,20,30,40,50,60,70,80,90,100}endifif(strlen(str_xlabels) == 0)	str_xlabels = "w_xlabels"	make/t/o/n=19 $("w_xlabels") = num2str($("w_xticks"))endifstring str_liststring str_ystring str_pathvariable var_indexvariable var_index1pathinfo homestr_path = s_pathnewpath/o/q str_symbpath, str_pathvar_index = 0pauseupdatedo	str_list = sortlist(wavelist($str_input[var_index],";",""),";",16)	str_list = removefromlist("*_avg",str_list)	str_list = removefromlist("*_sem",str_list)	print replacestring(";",str_list,"\r")	display	movewindow 405,38,755.25,353.25	var_index1 = 0	do		appendtograph $stringfromlist(var_index1,str_list) vs $("w_xticks")		var_index1+=1	while(var_index1<itemsinlist(str_list))	modifygraph rgb=(0,0,0)	fWaveAverage(str_list,"",3,0,replacestring("_*",w_ref[var_index],"")+"_avg",replacestring("_*",w_ref[var_index],"")+"_sem")	appendtograph $(replacestring("_*",w_ref[var_index],"")+"_avg") vs $("w_xticks")	modifygraph rgb($(replacestring("_*",w_ref[var_index],"")+"_avg"))=(65535,0,0),lsize($(replacestring("_*",w_ref[var_index],"")+"_avg"))=2	errorbars $(replacestring("_*",w_ref[var_index],"")+"_avg") SHADE= {0,0,(0,0,0,0),(0,0,0,0)},wave=($(replacestring("_*",w_ref[var_index],"")+"_sem"),$(replacestring("_*",w_ref[var_index],"")+"_sem"))	modifygraph gfrelsize=4	label bottom,"LED intensity (%)"	setaxis bottom 0,100	textbox/c/n=lgd/f=0/b=1/a=lb/e=2/x=0/y=0 "n = "+num2str(itemsinlist(str_list))	if(stringmatch($str_input[var_index],"*EPSP*") == 1)		str_y = "PSP"	endif	if(stringmatch($str_input[var_index],"*EPSC*") == 1)		str_y = "EPSC"	endif	if(stringmatch($str_input[var_index],"*IPSC*") == 1)		str_y = "IPSC"	endif	if(stringmatch($str_input[var_index],"*amp*") == 1)		str_y = str_y+" amplitude"		if(stringmatch($str_input[var_index],"*EPSP*") == 1)			str_y = str_y+" (mV)"		endif		if(stringmatch($str_input[var_index],"*PSC*") == 1)			str_y = str_y+" (pA)"		endif	endif	if(stringmatch($str_input[var_index],"*ar19*") == 1)		str_y = str_y+" AUC"		if(stringmatch($str_input[var_index],"*EPSP*") == 1)			str_y = str_y+" (mV/ms)"		endif		if(stringmatch($str_input[var_index],"*PSC*") == 1)			str_y = str_y+" (pA/ms)"		endif	endif	if(stringmatch($str_input[var_index],"*dc19*") == 1)		str_y = str_y+" decay time (ms) [10-90%]"	endif	if(stringmatch($str_input[var_index],"*dc28*") == 1)		str_y = str_y+" decay time (ms) [20-80%]"	endif	if(stringmatch($str_input[var_index],"*hw*") == 1)		str_y = str_y+" width (ms) [FWHM]"	endif	if(stringmatch($str_input[var_index],"*lagB*") == 1)		str_y = str_y+" onset latency (ms) [base]"	endif	if(stringmatch($str_input[var_index],"*lagR*") == 1)		str_y = str_y+" onset latency (ms) [rise]"	endif	if(stringmatch($str_input[var_index],"*pkT*") == 1)		str_y = str_y+" peak latency (ms)"	endif	if(stringmatch($str_input[var_index],"*pk*") == 1)		str_y = str_y+" peak"		if(stringmatch($str_input[var_index],"*EPSP*") == 1)			str_y = str_y+" (mV)"		endif		if(stringmatch($str_input[var_index],"*PSC*") == 1)			str_y = str_y+" (pA)"		endif	endif	if(stringmatch($str_input[var_index],"*rs19*") == 1)		str_y = str_y+" rise time (ms) [10-90%]"	endif	if(stringmatch($str_input[var_index],"*rs28*") == 1)		str_y = str_y+" rise time (ms) [20-80%]"	endif	label left,str_y	savepict/e=-5/res=300/p=str_symbpath/o as replacestring("_*",w_ref[var_index],"")+".png"	var_index+=1while(var_index<dimsize($str_input,0))resumeupdateend