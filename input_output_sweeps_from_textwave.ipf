#pragma rtGlobals=1Macro input_output_sweeps_from_textwave()pinput_output_sweeps_from_textwave()proc pinput_output_sweeps_from_textwave(str_input,str_sweep)string str_inputprompt str_input "input reference (textwave) ?"string str_sweepprompt str_sweep "sweep period ?"variable/g var_sweep = str2num(str_sweep)variable/g var_index = 0silent 1pauseupdatedo	string/g str_list = wavelist($str_input[var_index],";","")	variable/g var_list = 0	do		variable/g var_period = numpnts($stringfromlist(var_list,str_list))/var_sweep		variable/g var_nb = 0		variable/g var_asgn = 0		make/o/n=(var_sweep) $(nameofwave($stringfromlist(var_list,str_list))+"_avg") = NaN		make/o/n=(var_sweep,var_period) temp_matrix		do			duplicate/o/r=[var_nb,(var_nb+var_sweep-1)] $stringfromlist(var_list,str_list) tempwave			temp_matrix[][var_asgn] = tempwave[p]			var_nb = var_nb + var_sweep			var_asgn = var_asgn+1		while (var_nb<numpnts($stringfromlist(var_list,str_list)))			matrixop sum_matrix = sumrows(temp_matrix)		$(nameofwave($stringfromlist(var_list,str_list))+"_avg") = sum_matrix / var_period		killwaves temp_matrix, sum_matrix, tempwave		var_list+=1	while(var_list<itemsinlist(str_list))var_index += 1while(var_index<numpnts($str_input))resumeupdateend